\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{graphicx}
\graphicspath{ {/home/duc/Pictures/} }
\title{Report Modelling And Simulation Complex Model 2021
        \linebreak
        \\Subject:  spread of COVID-19 in a city and control policy}

\linebreak\author{
        Author: Duc Dinh Anh 
        \\Email:    ducda.m20ict@st.usth.edu.vn
        \\Mobile:   (+84) 982 086 651}

\date{July 2021}

\lstdefinestyle{mystyle}{
    numbers=left,                    
    numbersep=5pt,     
    tabsize=2,
}
\lstset{style=mystyle}

\maketitle
\begin{document}
\newpage
\section{Spread of the disease}
In this section, we want to discover the evolution of virus, beside we can track the steps of infectious process to see how and why virus can spread.
\\
\\
\underline{\textbf{#Model M1}}
\\
\underline{\emph{Strategy}}\\\\
We build this model base on the SEIR strategy which following states:\\
- S: \textbf{Susceptible}, meaning the individual can be infected,\\
- E: \textbf{Exposed}, meaning that the individual has been infected, nut cannot be infected other individuals,\\
- I: \textbf{Infectious}, meaning that the individual has been infected and can infect other individuals,\\
- R: \textbf{Recovered}, meaning that the individual has recovered from disease and cannot be infected anymore.\\\\
- \textbf{*Note}: S individual will be infected by I individual. E will become I from three to seven day and I will become R from seven to ten day.
\\\\
\underline{\emph{Requirement}}\\
- Implement population of species "Individuals" with an attribute for each epidemic state.\\
- Each individual are moving randomly by using wander skill which is built in method of GAMA.\\ 
- At each state, I individual infects one of S individual.\\
- Create mechanism that allow E individuals automatically change their  states to I.(Following the duration)\\
- Create mechanism that allow I individuals automatically change their  states to R.(Following the duration)\\
- Displaying each individual with a circle and a colour depends on their state.\\
- Creates 500 individuals and one infected individual in population, plot number of species in each states.\\\\

\underline{\emph{Result}}\\
\begin{lstlisting}
global{	
	int number_of_people <- 500;
	int number_of_infected_people <- 1;
	float dangerous_distance <- 0.5#m;
	int pandemic_duration <- 0;
	init{
		create individuals number: number_of_people;
		loop i from: 0 to: number_of_infected_people - 1{
			ask one_of(individuals){
				is_infected <- true;
				my_color <- #yellow;
				epidemic_state <- "E";
				count_date_expose <- 1;
			}
		}
	}
}
\end{lstlisting}
- In the global agent I create some attributes to calibrate the parameter of model and there are:
\\
- number\_of\_people: allow me to add more individual.
\\
- number\_of\_infected\_people: allow me to add infected people.
\\
- pandemic\_duration: counting the date of pandemic duration.
\\
- dangerous\_distance: Is the perfect distance for virus go inside susceptible individual.
\begin{lstlisting}
species individuals skills:[moving]{
	bool is_infected <- false;
	string epidemic_state <- "S";
	rgb my_color <- #blue;
	int count_date_expose <- 0;
	int count_date_infectious <- 0;
	
	reflex move{
		do wander speed: 1.0;
	}
	
	//Expose to infectious
	reflex dynamicTurnBad when:(count_date_expose >= 72) and (count_date_expose <= 240) and (epidemic_state = "E"){
		write "Change bad state";
		epidemic_state <- "I";
		is_infected <- true;
		my_color <- #red;
		count_date_infectious <- count_date_expose + 1;
	}
	
	//Infectious to recovery
	reflex dynamicTurnGood when: (count_date_infectious >= 240) and (count_date_infectious <= 720) and (epidemic_state = "I"){
		write "Change good state";
		epidemic_state <- "R";
		is_infected <- false;
		my_color <- #green;
		count_date_expose <- 0;
		count_date_infectious <- 0;
	}

	reflex infect when:(epidemic_state = "I"){
		ask individuals at_distance 3.0 {
			if (self.epidemic_state = "S"){
				self.is_infected <- true;
				self.epidemic_state <- "E";
				self.my_color <- #yellow;
			}
		}
	}
	//Counter of expose duration
	// one day is 24 hour -> 3 days is 72 hour
	// one day is 24 hour -> 10 days is 240 hour
	// one day is 24 hour -> 30 days is 720 hour
	reflex increaseExposeDate when: epidemic_state = "E"{
		if(count_date_expose = 240){
			count_date_expose <- 0;
		}
		if(cycle mod 60 = 0 and cycle != 0){
			count_date_expose <- count_date_expose + 1;
		}
	}
	
	reflex increaseInfectiousDate when: epidemic_state = "I"{
		if(count_date_infectious = 720){
			count_date_infectious <- 0;
		}
		if(cycle mod 60 = 0 and cycle != 0){
			count_date_infectious <- count_date_infectious + 1;
		}
		pandemic_duration <- count_date_infectious;
	}
	
	aspect infor{
		draw circle(0.5) color: my_color;
	}
}
\end{lstlisting}
- In the individual agent I create some attributes to contain the value that can control the model follows my scenario:
\\
- is\_infected: separating people who is infected or not infected.
\\
- epidemic\_state: point out the state of each individual.
\\
-	my\_color: color of each individual which can be decided by it's state.
\\
-	count\_date\_expose: counting the E duration of each individual.
\\
- count\_date\_infectious: counting the I duration of each individual.
\\\\
- This agent have five actions an each action have their own function base on the requirement.
\\
- "reflex infect": This action allows individual infects for susceptible individual. In this action, I will pick one Infectious individual and use this one to find the other individuals which has the same distance with the value of dangerous\_distance variable.
\\
- "reflex dynamicTurnBad" and "reflex increaseExposeDate": These two actions connect to each other, the second action counts the date when an individual stays in E state, and it will automatically change to I state when the condition of the first action satisfies, that means the state of individual will remain at E until it meets the end of the duration after that it will become I state.
\\
- "reflex dynamicTurnGood" and "reflex increaseInfectiousDate": These two actions connect to each other, the second action counts the date when an individual stays in I state, and it will automatically change to R state when the condition of the first action satisfies, that means the state of an individual will remain at I until it meets the end of the duration after that it will become R state.
\\
\includegraphics[width=0.95\textwidth]{complex_project_1}
\\
\caption{Figure 1: Simulation of model M1\_1, following the requirement 1 infected individual and 500 susceptible individuals.}
\\
\includegraphics[width=0.76\textwidth]{complex_project_2}
\\
\caption{Figure 2: Simulation of model M1\_1, after three days E individual turn to state I and start spreading desease to other individuals.}
\\
\includegraphics[width=0.73\textwidth]{complex_project_3}
\\
\caption{Figure 3: Simulation of model M1\_1, all E individuals change to I state.}
\\
\includegraphics[width=0.75\textwidth]{complex_project_4}
\\
\caption{Figure 4: Simulation of model M1\_1, all E individuals become infected individual.}
\\
\includegraphics[width=0.76\textwidth]{complex_project_5}
\\
\caption{Figure 5: Simulation of model M1\_1, all I individuals gradually chage to recovery individual.}
\\
\includegraphics[width=0.76\textwidth]{complex_project_6}
\\
\caption{Figure 6: Simulation of model M1\_1, number of individuals who have I state increase very fast.}
\newpage
\underline{\emph{Exploration}}
\\
\textbf{Exploration E1.1. Effect of randomness:}
\\
Define a gui experiment, creating 10 experiments (with different seed values) and plot the evolution of the number of I individuals for each simulation.
\\
\lstdefinestyle{mystyle2}{
    numbers=left,                    
    numbersep=5pt,     
}
\lstset{style=mystyle2}
\begin{lstlisting}
experiment E1_1 type: gui{
	parameter "Number of people: " var: number_of_people min:10 
	max: 1000 step: 10;
	parameter "Number of infected people: " 
	var: number_of_infected_people min: 1 max: 50 step: 10;
	init{
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::1];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::2];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::3];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::4];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::5];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::6];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::7];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::8];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::9];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::10];
	}
	output{
		display E1_1{
			chart "Ch" type:series{
				datalist ["#S", "#E", "#I", "#R"] 
				value: [individuals count (each.epidemic_state = "S"), 		
				individuals count (each.epidemic_state = "I"),			
				individuals count (each.epidemic_state = "E"), 				
				individuals count (each.epidemic_state = "R")] 
				color: [#blue, #yellow, #red, #green]; 			  
			}
		}
	}
}
\end{lstlisting}

- I design an experiment that can simulate ten simulations one time, and each simulation have different seed like the requirement. In this experiment I want to discover the evolution of each state base on the number of individual.
\\\\
\includegraphics[width=0.90\textwidth]{complex_project_7}
\\
\caption{Figure 7: Exploration E1\_1, ten experiments.}
\\\\
\includegraphics[width=0.90\textwidth]{complex_project_8}
\\
\caption{Figure 8: Exploration E1\_1, E cases increase, S cases decrease.}
\\
\includegraphics[width=0.90\textwidth]{complex_project_9}
\\
\caption{Figure 9: Exploration E1\_1, I cases appear.}
\\
\textbf{Exploration E1.2. Impact of the number of individuals.}
Define a gui experiment, creating 11 experiments, with the same seed value but with a number of individuals from 200 to 2000 (with a step of 200) and plot the evolution of the number of I individuals.
\begin{lstlisting}
experiment E1_2 type: gui{
	parameter "Number of people: " 
	var: number_of_people min:200 max: 2000 step: 200;
	parameter "Number of infected people: " 
	var: number_of_infected_people min: 1 max: 50 step: 10;
	
	init{
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
		create simulation with:[number_of_people::number_of_people,
		number_of_infected_people::number_of_infected_people,seed::seed];
	}
	output{
		display E1_2{
			chart "Ch" type:series{
				datalist ["#S", "#E", "#I", "#R"] 
				value: [individuals count (each.epidemic_state = "S"), 					individuals count (each.epidemic_state = "E"),  					individuals count (each.epidemic_state = "I"), 				individuals count (each.epidemic_state = "R")] 		  					color: [#blue, #yellow, #red, #green];
			}
		}
		
	}
}
\end{lstlisting}

\section{Spread in a city with a heterogeneous population}

\section{Public health policy}
\end{document}




